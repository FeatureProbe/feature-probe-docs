"use strict";(self.webpackChunkfeature_probe_docs=self.webpackChunkfeature_probe_docs||[]).push([[554],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),g=a,m=c["".concat(s,".").concat(g)]||c[g]||d[g]||l;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},162:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const l={sidebar_position:1},i="JavaScript SDK",o={unversionedId:"sdk/Client-Side SDKs/javascript-sdk",id:"sdk/Client-Side SDKs/javascript-sdk",title:"JavaScript SDK",description:"Try Out Demo Code",source:"@site/docs/sdk/Client-Side SDKs/javascript-sdk.md",sourceDirName:"sdk/Client-Side SDKs",slug:"/sdk/Client-Side SDKs/javascript-sdk",permalink:"/zh-CN/sdk/Client-Side SDKs/javascript-sdk",draft:!1,editUrl:"https://github.com/FeatureProbe/feature-probe-docs/tree/main/docs/sdk/Client-Side SDKs/javascript-sdk.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Client-Side SDKs",permalink:"/zh-CN/category/client-side-sdks"},next:{title:"Android SDK",permalink:"/zh-CN/sdk/Client-Side SDKs/android-sdk"}},s={},p=[{value:"Try Out Demo Code",id:"try-out-demo-code",level:2},{value:"Step-by-Step Guide",id:"step-by-step-guide",level:2},{value:"Step 1. Install the JavaScript SDK",id:"step-1-install-the-javascript-sdk",level:3},{value:"Step 2. Create a FeatureProbe instance",id:"step-2-create-a-featureprobe-instance",level:3},{value:"Step 3. Use the instance to get your setting value",id:"step-3-use-the-instance-to-get-your-setting-value",level:3},{value:"Step 4. Unit Testing (Optional)",id:"step-4-unit-testing-optional",level:3},{value:"Available options",id:"available-options",level:2},{value:"Testing",id:"testing",level:2}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"javascript-sdk"},"JavaScript SDK"),(0,a.kt)("h2",{id:"try-out-demo-code"},"Try Out Demo Code"),(0,a.kt)("p",null,"We provide a runnable demo code for you to understand how FeatureProbe SDK is used."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Start FeatureProbe Service with docker composer. ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/FeatureProbe/FeatureProbe#1-starting-featureprobe-service-with-docker-compose"},"How to"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Download this repo and run the demo program:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/FeatureProbe/client-sdk-js.git\ncd client-sdk-js\n// open example/index.html in browser\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Find the Demo code in ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/FeatureProbe/client-sdk-js/tree/main/example"},"example"),",\ndo some change and run the program again.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"// open example/index.html in browser\n")),(0,a.kt)("h2",{id:"step-by-step-guide"},"Step-by-Step Guide"),(0,a.kt)("p",null,"In this guide we explain how to use feature toggles in a JavaScript application using FeatureProbe."),(0,a.kt)("h3",{id:"step-1-install-the-javascript-sdk"},"Step 1. Install the JavaScript SDK"),(0,a.kt)("p",null,"First, install the FeatureProbe SDK as a dependency in your application."),(0,a.kt)("p",null,"NPM:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"npm install featureprobe-client-sdk-js --save\n")),(0,a.kt)("p",null,"Or via CDN:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'<script type="text/javascript" src="https://unpkg.com/featureprobe-client-sdk-js@latest/dist/featureprobe-client-sdk-js.min.js"><\/script>\n')),(0,a.kt)("h3",{id:"step-2-create-a-featureprobe-instance"},"Step 2. Create a FeatureProbe instance"),(0,a.kt)("p",null,"After you install and import the SDK, create a single, shared instance of the FeatureProbe sdk."),(0,a.kt)("p",null,"NPM:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const uniqueUserId = /* uniqueUserId */;\nconst user = new FPUser(uniqueUserId);\nuser.with("userId", /* userId */);\n\nconst fp = new FeatureProbe({\n  remoteUrl: "https://127.0.0.1:4007",\n  clientSdkKey: /* clientSdkKey */\n  user,\n});\nfp.start();\n')),(0,a.kt)("p",null,"Or via CDN:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const uniqueUserId = /* uniqueUserId */;\nconst user = new featureProbe.FPUser(uniqueUserId);\nuser.with("userId", /* userId */);\n\nconst fp = new featureProbe.FeatureProbe({\n  remoteUrl: "https://127.0.0.1:4007",\n  clientSdkKey: /* clientSdkKey */\n  user,\n});\nfp.start();\n')),(0,a.kt)("h3",{id:"step-3-use-the-instance-to-get-your-setting-value"},"Step 3. Use the instance to get your setting value"),(0,a.kt)("p",null,"You can use sdk to check which value this user will receive for a given feature flag."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'fp.on("ready", function() {\n  const result = fp.boolValue(/* toggleKey */, false);\n  if (result) {\n    do_some_thing();\n  } else {\n    do_other_thing();\n  }\n  const reason = fp.boolDetail(/* toggleKey */, false);\n  console.log(reason);\n})\n')),(0,a.kt)("h3",{id:"step-4-unit-testing-optional"},"Step 4. Unit Testing (Optional)"),(0,a.kt)("p",null,"NPM:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'test("feature probe unit testing", (done) => {\n  let fp = FeatureProbe.newForTest({ testToggle: true });\n  fp.start();\n\n  fp.on("ready", function () {\n    let t = fp.boolValue(/* toggleKey */, false);\n    expect(t).toBe(true);\n    done();\n  });\n});\n')),(0,a.kt)("p",null,"Or via CDN:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'test("feature probe unit testing", (done) => {\n  let fp = featureProbe.FeatureProbe.newForTest({ testToggle: true });\n  fp.start();\n\n  fp.on("ready", function () {\n    let t = fp.boolValue(/* toggleKey */, false);\n    expect(t).toBe(true);\n    done();\n  });\n});\n')),(0,a.kt)("h2",{id:"available-options"},"Available options"),(0,a.kt)("p",null,"This SDK takes the following options:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"option"),(0,a.kt)("th",{parentName:"tr",align:null},"required"),(0,a.kt)("th",{parentName:"tr",align:null},"default"),(0,a.kt)("th",{parentName:"tr",align:null},"description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"remoteUrl"),(0,a.kt)("td",{parentName:"tr",align:null},"depends"),(0,a.kt)("td",{parentName:"tr",align:null},"n/a"),(0,a.kt)("td",{parentName:"tr",align:null},"The unified URL to get toggles and post events")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"togglesUrl"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"n/a"),(0,a.kt)("td",{parentName:"tr",align:null},"The specific URL to get toggles, once set, remoteUrl will be ignored")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"eventsUrl"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"n/a"),(0,a.kt)("td",{parentName:"tr",align:null},"The specific URL to post events, once set, remoteUrl will be ignored")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"clientSdkKey"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"n/a"),(0,a.kt)("td",{parentName:"tr",align:null},"The Client SDK Key is used to authentification")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"user"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"n/a"),(0,a.kt)("td",{parentName:"tr",align:null},"The User with attributes like name, age is used when toggle evaluation")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"refreshInterval"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"1000"),(0,a.kt)("td",{parentName:"tr",align:null},"The SDK check for updated in millisecond")))),(0,a.kt)("h2",{id:"testing"},"Testing"),(0,a.kt)("p",null,"We have unified integration tests for all our SDKs. Integration test cases are added as submodules for each SDK repo. So\nbe sure to pull submodules first to get the latest integration tests before running tests."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"npm run test\n")))}d.isMDXComponent=!0}}]);